{% load static %}
{% load breadcrumbs %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>
            {% block title %}Mocktions{% endblock %}
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        {% comment %}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/htmx.org@1.8.5" integrity="sha384-7aHh9lqPYGYZ7sTHvzP1t3BAfLhYSTy9ArHdP3Xsr9/3TlGurYgcPBoFmXX2TX/w" crossorigin="anonymous"></script>
        {% endcomment %}
        <script src="{% static 'js/htmx.min.js' %}"></script>
        <script src="{% static 'js/controls.js' %}"></script>
        <script src="{% static 'js/Sortable.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    </head>
    <body>
        {% include "base/html/includes/navbar.html" %}
        <main class="container pt-2 pt-md-4 pb-4 mb-4">

            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    {% block breadcrumb %}
            
                    {% endblock breadcrumb %}
                </ol>
            </nav>
            
            {% include 'base/html/includes/messages.html' with messages=messages %}
            
            <!-- toast alerts -->
            <div id="id_toast_container" class="toast-container position-fixed bottom-0 end-0 translate-middle-y p-3" hx-swap="afterbegin">
                <div id="id_loading_toast" class="toast show htmx-indicator" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="d-flex">
                        <div class="toast-body">
                            <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                            Loading...
                        </div>
                        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                </div>
            </div>

            {% block body %}{% endblock %}

            <script>
                // Bootstrap needs a delay here or else the toast doesn't display properly.
                document.body.addEventListener("displayToast", function(e) {
                    window.setTimeout(function() {
                        const toastCont = document.getElementById("id_toast_container");
                        const toastEl = toastCont.querySelector(".toast");
                        const stoast = bootstrap.Toast.getOrCreateInstance(toastEl, {/*'delay': 1000*/});
                        stoast.show();
                    }, 100);
                });
                
                // add CSRF-token manually; required for hx-delete requests.
                document.body.addEventListener("htmx:configRequest", (e) => {
                    e.detail.headers['X-CSRFToken'] = "{{ csrf_token }}";
                });
            </script>

        </main>
        
        {% include "base/html/includes/footer.html" %}
        
    </body>
</html>
