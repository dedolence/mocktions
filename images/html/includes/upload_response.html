{% load static %}
{% load rest_framework %}
<div id="id_image_add" class="card my-5">
    <div class="card-header border-bottom">&nbsp;</div>
    <h5 class="card-title text-center py-3 border-bottom">Add an image</h5>
    <div class="card-body row g-3">
        <div class="col border-end pe-3">
            <form
                hx-post="{% url 'images:image-upload' %}"
                hx-encoding="multipart/form-data"
                hx-target="#id_image_add"
                hx-swap="outerHTML"
                hx-indicator="#id_indicator">
                {% csrf_token %}
                {% render_form upload_serializer %}
                <button type="submit" class="btn btn-primary">
                    Upload
                </button>
            </form>
        </div>
        <div class="col px-3">
            <form
                hx-post="{% url 'images:image-fetch' %}"
                hx-encoding="multipart/form-data"
                hx-target="#id_image_add"
                hx-swap="outerHTML"
                hx-indicator="#id_indicator">
                {% csrf_token %}
                {% render_form url_serializer template_pack='rest_framework/inline' %}
                <button type="submit" class="btn btn-primary">
                    Upload
                </button>
            </form>
        </div>
        <div class="col border-start ps-3">
            <p class="">Or, get a random image:</p>
            <form
                hx-post="{% url 'images:image-fetch' %}"
                hx-encoding="multipart/form-data"
                hx-target="#id_image_add"
                hx-swap="outerHTML"
                hx-indicator="#id_indicator">
                {% csrf_token %}
                <input type="hidden" name="url" value="https://picsum.photos/300"/>
                <button type="submit" class="btn btn-primary">
                    Upload random
                </button>
            </form>
        </div>
    </div>
</div>

<div id="id_image_list" class="row row-cols-auto my-2 gy-4 gx-2" hx-swap-oob="afterbegin">
    {% if images %}
        {% for image in images %}
            {% include "images/html/includes/image.html" with image=image %}
        {% endfor %}
    {% elif image %}
        {% include "images/html/includes/image.html" with image=image %}
    {% endif %}
</div>